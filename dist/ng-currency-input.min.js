angular.module("ng-currency-input",[]).directive("currencyInput",["$locale",function(){return{restrict:"A",replace:!0,require:"ngModel",template:'<input type="text" class="form-control" style="text-align: right;">',link:function(a,b,c,d){function e(a){var b=2,c="";if(null==a)return"0,00";a=f(a),thousandsCount=0;for(var d=a.length-1;d>=0;d--){var e=a.substr(d,1);"."!=e?("-"!=e&&(c.length<=2?2==thousandsCount&&(c=","+c,thousandsCount=0):3==thousandsCount&&(c="."+c,thousandsCount=0),thousandsCount++),c=e+c):(c="."+c,c=c.substr(0,b+1),0>=b&&(c=""))}return 1===c.length&&(c="0,0"+c.toString()),2===c.length&&(c="0,"+c.toString()),"0,00"!=c&&"0,"!=c.substr(0,2)&&(c=c.substr(c.search(/[^0]/),c.length-c.search(/[^0]/))),c}function f(a){return console.log(a),null!=a&&("number"==typeof a&&1===a.toString().length?a=a.toString()+"00":"number"==typeof a&&a.toString().indexOf(".")>=0?(a=a.toString().replace(".",""),a=a.toString()+"0"):(a=a.toString().replace(",",""),a=parseFloat(a.toString()).toString(),a=a.replace(".",""))),a}function g(a){a.setSelectionRange(a.selectionEnd,a.selectionEnd)}b.on("keyup",function(a){{var b=a||window.event;b.charCode||b.keyCode}}),b.on("keypress",function(a){{var b=a||window.event;b.charCode||b.keyCode}}),b.on("focus",function(a){g(this),a.preventDefault()}),a.$watch(function(){return valor=e(d.$modelValue),b.val(valor)}),d.$formatters.unshift(function(a){return console.log("formatters"),a=e(a)}),d.$parsers.unshift(function(a){return a})}}}]);